<div class="form-container">
    <div class="register-header">
      <h2 class="register-title">Crear Nueva Cuenta</h2>
      <p class="register-subtitle">Completa el formulario para registrarte en el sistema</p>
    </div>

    <form class="form" (ngSubmit)="onRegister()" #registerForm="ngForm">
      <div class="form-row" style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem;">
        <div class="form-group">
          <label for="nombre">Nombre</label>
          <div class="input-wrapper">
            <input id="nombre" 
                   type="text" 
                   name="nombre" 
                   class="form-control" 
                   [(ngModel)]="persona.nombre" 
                   placeholder="Ingresa tu nombre" 
                   required 
                   #nombreInput="ngModel"
                   [class.is-invalid]="nombreInput.invalid && nombreInput.touched">
            <i class="fa-solid fa-user input-icon"></i>
          </div>
          <div class="error" *ngIf="nombreInput.invalid && nombreInput.touched">
            <i class="fa-solid fa-circle-exclamation"></i>
            <span>El nombre es requerido</span>
          </div>
        </div>

        <div class="form-group">
          <label for="apellidoP">Apellido Paterno</label>
          <div class="input-wrapper">
            <input id="apellidoP" 
                   type="text" 
                   name="apellido_paterno" 
                   class="form-control" 
                   [(ngModel)]="persona.apellido_paterno" 
                   placeholder="Ingresa tu apellido paterno" 
                   required 
                   #apellidoPInput="ngModel"
                   [class.is-invalid]="apellidoPInput.invalid && apellidoPInput.touched">
            <i class="fa-solid fa-user input-icon"></i>
          </div>
          <div class="error" *ngIf="apellidoPInput.invalid && apellidoPInput.touched">
            <i class="fa-solid fa-circle-exclamation"></i>
            <span>El apellido paterno es requerido</span>
          </div>
        </div>
      </div>

      <div class="form-row" style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem; margin-top:1rem;">
        <div class="form-group">
          <label for="apellidoM">Apellido Materno</label>
          <div class="input-wrapper">
            <input id="apellidoM" 
                   type="text" 
                   name="apellido_materno" 
                   class="form-control" 
                   [(ngModel)]="persona.apellido_materno" 
                   placeholder="Ingresa tu apellido materno" 
                   required 
                   #apellidoMInput="ngModel"
                   [class.is-invalid]="apellidoMInput.invalid && apellidoMInput.touched">
            <i class="fa-solid fa-user input-icon"></i>
          </div>
          <div class="error" *ngIf="apellidoMInput.invalid && apellidoMInput.touched">
            <i class="fa-solid fa-circle-exclamation"></i>
            <span>El apellido materno es requerido</span>
          </div>
        </div>

        <div class="form-group">
          <label for="telefono">Teléfono</label>
          <div class="input-wrapper">
            <input id="telefono" 
                   type="tel" 
                   name="telefono" 
                   class="form-control" 
                   [(ngModel)]="persona.telefono" 
                   placeholder="Ej: +1 234 567 8900" 
                   #telefonoInput="ngModel"
                   pattern="[0-9+ -]+"
                   [class.is-invalid]="telefonoInput.invalid && telefonoInput.touched">
            <i class="fa-solid fa-phone input-icon"></i>
          </div>
          <div class="error" *ngIf="telefonoInput.invalid && telefonoInput.touched">
            <i class="fa-solid fa-circle-exclamation"></i>
            <span>Ingresa un número de teléfono válido</span>
          </div>
        </div>
      </div>

      <div class="form-row" style="margin-top:1rem;">
        <div class="form-group">
          <label for="correo">Correo electrónico</label>
          <div class="input-wrapper">
            <input id="correo" 
                   type="email" 
                   name="correo" 
                   class="form-control" 
                   [(ngModel)]="persona.correo" 
                   placeholder="ejemplo@dominio.com" 
                   required 
                   email 
                   #correoInput="ngModel"
                   [class.is-invalid]="correoInput.invalid && correoInput.touched">
            <i class="fa-solid fa-envelope input-icon"></i>
          </div>
          <div class="error" *ngIf="correoInput.invalid && correoInput.touched">
            <i class="fa-solid fa-circle-exclamation"></i>
            <span>Por favor, ingresa un correo electrónico válido</span>
          </div>
        </div>
      </div>

      <div class="form-row" style="margin-top:1rem;">
        <div class="form-group">
          <label for="contrasenia">Contraseña</label>
          <div class="input-wrapper">
            <input id="contrasenia" 
                   [type]="showPassword ? 'text' : 'password'" 
                   name="contrasenia" 
                   class="form-control password-input" 
                   [(ngModel)]="contrasenia" 
                   placeholder="Mínimo 6 caracteres" 
                   required 
                   minlength="6" 
                   #passwordInput="ngModel" 
                   (input)="updatePasswordStrength()"
                   [class.is-invalid]="passwordInput.invalid && passwordInput.touched">
            
            <button type="button" 
                    class="toggle-password" 
                    (click)="togglePasswordVisibility()" 
                    [attr.aria-label]="showPassword ? 'Ocultar contraseña' : 'Mostrar contraseña'">
              <i class="fas" [class.fa-eye]="!showPassword" [class.fa-eye-slash]="showPassword"></i>
            </button>
          </div>

          <div class="password-strength-wrapper" style="margin-top:0.75rem;">
            <div class="password-strength" 
                 style="height:6px; background:#f3f4f6; border-radius:8px; overflow:hidden;">
              <div class="password-strength-bar" 
                   [style.width]="passwordStrength + '%'" 
                   [style.background]="getPasswordStrengthColor()" 
                   style="height:100%; transition: all 200ms ease;"></div>
            </div>
            <div class="password-strength-text" 
                 [style.color]="getPasswordStrengthColor()" 
                 style="font-size: 0.875rem; margin-top: 0.5rem; font-weight: 500;">
              {{ getPasswordStrengthText() }}
            </div>
          </div>

          <div class="error" *ngIf="passwordInput.invalid && passwordInput.touched">
            <i class="fa-solid fa-circle-exclamation"></i>
            <span>La contraseña debe tener al menos 6 caracteres</span>
          </div>
        </div>
      </div>

      <button type="submit" 
              class="btn btn-primary" 
              [disabled]="registerForm.invalid || isLoading" 
              style="margin-top:2rem; width:100%; background: #4f46e5; color: white; font-weight: 600;">
        <span *ngIf="!isLoading" class="btn-content">
          <i class="fa-solid fa-user-plus"></i>
          <span>Crear Cuenta</span>
        </span>
        <span *ngIf="isLoading" class="loading">
          <i class="fa-solid fa-circle-notch fa-spin"></i>
          <span>Procesando...</span>
        </span>
      </button>

      <div class="form-footer" style="margin-top:2rem; text-align:center;">
        <div class="divider" style="margin:1.5rem 0;">
          <span style="color:#6b7280; font-size:0.875rem;">O</span>
        </div>

        <p class="footer-note" style="color:#6b7280; font-size:0.875rem;">
          Al crear una cuenta, aceptas nuestros 
          <a href="#" style="color:#4f46e5; text-decoration:none; font-weight:500;">términos y condiciones</a>
        </p>
      </div>

    </form>
</div>