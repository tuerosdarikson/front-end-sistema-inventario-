<div class="register-card">
  <div class="register-visual" aria-hidden="false">
    <div class="visual-inner">
      <div class="brand">Repuestos • Sistema</div>
      <p class="register-visual-sub">Crea tu cuenta para gestionar inventario y clientes</p>

      <div class="visual-illustration" aria-hidden="true">
        <!-- Simple SVG ilustrativo que no depende de assets externos -->
        <svg width="220" height="160" viewBox="0 0 220 160" fill="none" xmlns="http://www.w3.org/2000/svg" role="img">
          <rect x="0" y="0" width="220" height="160" rx="12" fill="rgba(255,255,255,0.06)" />
          <g transform="translate(28,22)" fill="none" stroke="rgba(255,255,255,0.96)" stroke-width="2">
            <rect x="2" y="2" width="120" height="80" rx="8" stroke-opacity="0.14" fill="rgba(255,255,255,0.03)"/>
            <path d="M10 30h100" stroke-opacity="0.18"/>
            <circle cx="30" cy="24" r="4" fill="white" opacity="0.95" />
            <g transform="translate(74,8)">
              <path d="M6 10v18" stroke-linecap="round" stroke-opacity="0.9"/>
              <path d="M0 24h26" stroke-linecap="round" stroke-opacity="0.9"/>
            </g>
          </g>
          <g transform="translate(28,110)" fill="none" stroke="rgba(255,255,255,0.95)" stroke-width="2">
            <rect x="0" y="0" width="30" height="30" rx="6" stroke-opacity="0.12"/>
            <rect x="44" y="0" width="30" height="30" rx="6" stroke-opacity="0.12"/>
            <rect x="88" y="0" width="30" height="30" rx="6" stroke-opacity="0.12"/>
          </g>
        </svg>
      </div>
    </div>
  </div>

  <div class="register-body">
    <div class="register-header">
      <h2 class="register-title">Crear Cuenta</h2>
      <p class="register-subtitle">Completa tus datos para registrarte</p>
    </div>

    <form class="form" (ngSubmit)="onRegister()" #registerForm="ngForm">

      <div class="form-row" style="display: grid; grid-template-columns: 1fr 1fr; gap: 0.875rem;">
        <div class="form-group">
          <label for="nombre">Nombre</label>
          <input id="nombre" type="text" name="nombre" class="form-control" [(ngModel)]="persona.nombre" placeholder="Nombre" required #nombreInput="ngModel">
          <div class="error" *ngIf="nombreInput.invalid && nombreInput.touched">El nombre es requerido</div>
        </div>

        <div class="form-group">
          <label for="apellidoP">Apellido Paterno</label>
          <input id="apellidoP" type="text" name="apellido_paterno" class="form-control" [(ngModel)]="persona.apellido_paterno" placeholder="Apellido Paterno" required #apellidoPInput="ngModel">
          <div class="error" *ngIf="apellidoPInput.invalid && apellidoPInput.touched">El apellido paterno es requerido</div>
        </div>
      </div>

      <div class="form-row" style="display: grid; grid-template-columns: 1fr 1fr; gap: 0.875rem; margin-top:0.75rem;">
        <div class="form-group">
          <label for="apellidoM">Apellido Materno</label>
          <input id="apellidoM" type="text" name="apellido_materno" class="form-control" [(ngModel)]="persona.apellido_materno" placeholder="Apellido Materno" required #apellidoMInput="ngModel">
          <div class="error" *ngIf="apellidoMInput.invalid && apellidoMInput.touched">El apellido materno es requerido</div>
        </div>

        <div class="form-group">
          <label for="telefono">Teléfono</label>
          <input id="telefono" type="text" name="telefono" class="form-control" [(ngModel)]="persona.telefono" placeholder="Teléfono" #telefonoInput="ngModel">
          <div class="error" *ngIf="telefonoInput.invalid && telefonoInput.touched">Ingresa un número de teléfono válido</div>
        </div>
      </div>

      <div class="form-row" style="margin-top:0.75rem;">
        <div class="form-group">
          <label for="correo">Correo electrónico</label>
          <input id="correo" type="email" name="correo" class="form-control" [(ngModel)]="persona.correo" placeholder="Correo electrónico" required email #correoInput="ngModel">
          <div class="error" *ngIf="correoInput.invalid && correoInput.touched">Por favor, ingresa un correo electrónico válido</div>
        </div>
      </div>

      <div class="form-row" style="margin-top:0.75rem;">
        <div class="form-group" style="position: relative;">
          <label for="contrasenia">Contraseña</label>
          <input id="contrasenia" [type]="showPassword ? 'text' : 'password'" name="contrasenia" class="form-control" [(ngModel)]="contrasenia" placeholder="Contraseña" required minlength="6" #passwordInput="ngModel" (input)="updatePasswordStrength()">

          <button type="button" class="btn-ghost" (click)="togglePasswordVisibility()" aria-label="Mostrar/Ocultar contraseña" style="position: absolute; right: 8px; top: 36px; padding: 0.35rem 0.55rem;">
            <i [class]="showPassword ? 'fas fa-eye-slash' : 'fas fa-eye'"></i>
          </button>

          <div class="password-strength" style="margin-top:0.6rem; height:8px; background: rgba(17,24,39,0.04); border-radius:6px; overflow:hidden;">
            <div class="password-strength-bar" [style.width]="passwordStrength + '%'" [style.background]="getPasswordStrengthColor()" style="height:100%; transition: width 160ms ease;"></div>
          </div>

          <div class="error" *ngIf="passwordInput.invalid && passwordInput.touched">La contraseña es requerida y debe tener al menos 6 caracteres</div>
        </div>
      </div>

      <button type="submit" class="btn btn-primary" [disabled]="registerForm.invalid || isLoading" style="margin-top:1rem; width:100%;">
        <span *ngIf="!isLoading">Crear Cuenta</span>
        <span *ngIf="isLoading" class="loading">Cargando...</span>
      </button>

      <hr class="divider">

      <p class="footer-note">Al crear una cuenta, aceptas nuestros términos y condiciones.</p>

    </form>
  </div>
</div>